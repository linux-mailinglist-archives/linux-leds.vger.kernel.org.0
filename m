Return-Path: <linux-leds-owner@vger.kernel.org>
X-Original-To: lists+linux-leds@lfdr.de
Delivered-To: lists+linux-leds@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id A51B014263D
	for <lists+linux-leds@lfdr.de>; Mon, 20 Jan 2020 09:56:31 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726780AbgATI4V (ORCPT <rfc822;lists+linux-leds@lfdr.de>);
        Mon, 20 Jan 2020 03:56:21 -0500
Received: from mailgate1.rohmeurope.com ([178.15.145.194]:60012 "EHLO
        mailgate1.rohmeurope.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1725872AbgATI4V (ORCPT
        <rfc822;linux-leds@vger.kernel.org>); Mon, 20 Jan 2020 03:56:21 -0500
X-AuditID: c0a8fbf4-199ff70000001fa6-26-5e256b32012e
Received: from smtp.reu.rohmeu.com (will-cas002.reu.rohmeu.com [192.168.251.178])
        by mailgate1.rohmeurope.com (Symantec Messaging Gateway) with SMTP id E0.69.08102.23B652E5; Mon, 20 Jan 2020 09:56:18 +0100 (CET)
Received: from WILL-MAIL002.REu.RohmEu.com ([fe80::e0c3:e88c:5f22:d174]) by
 WILL-CAS002.REu.RohmEu.com ([fe80::fc24:4cbc:e287:8659%12]) with mapi id
 14.03.0439.000; Mon, 20 Jan 2020 09:56:06 +0100
From:   "Vaittinen, Matti" <Matti.Vaittinen@fi.rohmeurope.com>
To:     "mazziesaccount@gmail.com" <mazziesaccount@gmail.com>
CC:     "linux-leds@vger.kernel.org" <linux-leds@vger.kernel.org>,
        "dmurphy@ti.com" <dmurphy@ti.com>,
        "linux-rtc@vger.kernel.org" <linux-rtc@vger.kernel.org>,
        "linux-gpio@vger.kernel.org" <linux-gpio@vger.kernel.org>,
        "alexandre.belloni@bootlin.com" <alexandre.belloni@bootlin.com>,
        "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>,
        "mturquette@baylibre.com" <mturquette@baylibre.com>,
        "lgirdwood@gmail.com" <lgirdwood@gmail.com>,
        "devicetree@vger.kernel.org" <devicetree@vger.kernel.org>,
        "jacek.anaszewski@gmail.com" <jacek.anaszewski@gmail.com>,
        "a.zummo@towertech.it" <a.zummo@towertech.it>,
        "linus.walleij@linaro.org" <linus.walleij@linaro.org>,
        "mark.rutland@arm.com" <mark.rutland@arm.com>,
        "robh+dt@kernel.org" <robh+dt@kernel.org>,
        "bgolaszewski@baylibre.com" <bgolaszewski@baylibre.com>,
        "linux-clk@vger.kernel.org" <linux-clk@vger.kernel.org>,
        "sboyd@kernel.org" <sboyd@kernel.org>,
        "lee.jones@linaro.org" <lee.jones@linaro.org>,
        "broonie@kernel.org" <broonie@kernel.org>,
        "pavel@ucw.cz" <pavel@ucw.cz>
Subject: Re: [PATCH v10 12/13] leds: Add common LED binding parsing support
 to LED class/core
Thread-Topic: [PATCH v10 12/13] leds: Add common LED binding parsing support
 to LED class/core
Thread-Index: AQHVzRql8w95ETT7I0aUjD691ynycqfzM/OA
Date:   Mon, 20 Jan 2020 08:56:06 +0000
Message-ID: <80cd6322a00d9c27044b94f33e0010330962af2c.camel@fi.rohmeurope.com>
References: <cover.1579249511.git.matti.vaittinen@fi.rohmeurope.com>
         <718ff08187974eff683a014b73afc4f234a8c960.1579249511.git.matti.vaittinen@fi.rohmeurope.com>
In-Reply-To: <718ff08187974eff683a014b73afc4f234a8c960.1579249511.git.matti.vaittinen@fi.rohmeurope.com>
Accept-Language: en-US, de-DE
Content-Language: de-DE
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [213.255.186.46]
Content-Type: text/plain; charset="utf-8"
Content-ID: <CDCD0B69E770914F8EFD4BA60D20C6D9@de.rohmeurope.com>
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Brightmail-Tracker: H4sIAAAAAAAAA02TbUwURxjHM7t7uwPc2uUEb3rWJm5DqqaeilhGY4ymtd3W2JhoY3zp4VIW
        9pC7I3t3KuiHi6mpHppQQ9t44cUgp6gE9dSICMFcQOCwmovyFkUkogVsIFbUYs3VXbYKX2b+
        8/znN//nwzOQNI3QFmh3eiTFKebxdDx1vfrf0MLUnSm2xR1DDK6KdjL459GTDB4vi1D414FB
        Glc03zLgoo5LBnzv8nkK979oAfjl3YMELnlzisDPDj8w4IsVbwC+U19K48t/1QJ84+xdGge7
        owQuDbZROBpZi/siLTQ+0NjM4FjXBWp1slBTXgOEsZ4DjFBes1e4GuhjhNCZQ7Rwv6uBFlp7
        rhDC7+UThFB99hUjPA99vCF+a8LKTNGza6M9x7lo1Y4Eub2sisj/6Sixx/diP/ABXxHhBxAi
        Lg21RT73g3ho4joBehbqJvRDG0Cj4yco7RLNrUT+XkaTSdxydCGa6AdxkORKIYodLNTKM7kM
        VHk7TSsncTvQdV+A1HUqOjb2FGia4lLQzcbiSc1y36FAsJnSk04A1FvnUwEGxnEyGhS1K4Cb
        gw75Rgk9yYxCT14ZNI04DlU13CZ1nYyGH8X+r/OocWJgsl+Sm4/O1S/S0dWooaMe6HouKika
        YPQOElH7sUGqGMwKTEsITNGBaXRgGh2YRh8HhjMAOUR7Xo7okZZYFclrVVyyQ91+dDlCQJ+X
        8TrwX/ibMCAgCIMPIcEns0wubzPNyHRlFciiW85QvHmSOwwQJPkktu/IXJuJzRILCiXF9c6a
        DSnezH468MsPJk7L2ilJ+ZLyzv0IQh6xX+em2EyJipQj7cm253mmbALGaY/HW5LckjNLUkSv
        R87QhiPDrU6HZhnVXNKu4qw7X3SoVR2NgHRYPFxWScKLZUF1bZ5cu8cag6SJcrqcksXM4hUq
        xmmY7HW+Dx0BZgj4mexnWk9G9QO9f3NEjSPUuM50XovziFOWxQfcD4uzm6IgMTw8vGzV7Njr
        fa7alN/S/znp3FwZbLGPzTsce2rbtuFB7OiVL9bP6Pwyc9lozxHr6dwtHxRUm+3fZpPX1vzx
        /SdD3sK1i2u3zZ/z+G/Zb1y439/Ssa7J2HQzZ/cNedP2Nfb1/Uutmy2m2MTGP4MlfXWtE18V
        ZFodFcZNXTJPuWVxyQJScYtvAYUKI3P9AwAA
Sender: linux-leds-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-leds.vger.kernel.org>
X-Mailing-List: linux-leds@vger.kernel.org

DQpPbiBGcmksIDIwMjAtMDEtMTcgYXQgMTE6NDMgKzAyMDAsIE1hdHRpIFZhaXR0aW5lbiB3cm90
ZToNCj4gUXVpY2sgZ3JlcCBmb3IgJ2Zvcl9lYWNoJyBvciAnbGludXgsZGVmYXVsdC10cmlnZ2Vy
JyBvcg0KPiAnZGVmYXVsdC1zdGF0ZScgdW5kZXIgZHJpdmVycy9sZWRzIGNhbiB0ZWxsIHF1aXRl
IGEgbG90LiBJdCBzZWVtcw0KPiBtdWx0aXBsZSBMRUQgY29udHJvbGxlciBkcml2ZXJzIGltcGxl
bWVudCB0aGUgdmVyeSBzaW1pbGFyIGxvb3BpbmcNCj4gdGhyb3VnaCB0aGUgY2hpbGQgbm9kZXMg
aW4gb3JkZXIgdG8gbG9jYXRlIHRoZSBMRUQgbm9kZXMgYW5kIHJlYWQNCj4gYW5kIHN1cHBvcnQg
dGhlIGNvbW1vbiBMRUQgZHQgYmluZGluZ3MuIEltcGxlbWVudGluZyB0aGlzIHNhbWUNCj4gc3R1
ZmYgZm9yIGFsbCBMRUQgY29udHJvbGxlcnMgZ2V0cyBvbGQgcHJldHR5IGZhc3QuDQo+IA0KPiBU
aGlzIGNvbW1pdCBhZGRzIHN1cHBvcnQgZm9yIGxvY2F0aW5nIHRoZSBMRUQgbm9kZSAoYmFzZWQg
b24ga25vd24NCj4gbm9kZSBuYW1lcyAtIG9yIGdpdmVuIHByb3BlcnR5IG5hbWUtdmFsdWUgcGFp
cikgYW5kIGhhbmRsaW5nIG9mDQo+IGZldyBjb21tb24gTEVEIHByb3BlcnRpZXMuDQo+IA0KPiBs
aW51eCxkZWZhdWx0LXRyaWdnZXIsDQo+IGRlZmF1bHQtc3RhdGUgKHdpdGggdGhlIGV4Y2VwdGlv
biBvZiBrZWVwKSwNCj4gDQo+IChpbiBhZGRpdGlvbiB0byBhbHJlYWR5IGhhbmRsZWQNCj4gZnVu
Y3Rpb24tZW51bWVyYXRvciwNCj4gZnVuY3Rpb24sDQo+IGNvbG9yDQo+IGFuZCBsYWJlbCkuDQo+
IA0KPiBUaGUgaGFuZGxpbmcgb2YgbGludXgsZGVmYXVsdC10cmlnZ2VyIGFuZCBkZWZhdWx0LXN0
YXRlIGFyZSBvbWl0dGVkDQo+IGlmIGluaXRfZGF0YS0+cGFyc2VfZndub2RlIGlzIG5vdCBzZXQg
dG8gdHJ1ZS4gVGh1cyB0aGUgZXhpc3RpbmcNCj4gTEVEIGRyaXZlcnMgYXJlIG5vdCBpbXBhY3Rl
ZCB1bnRpbCB0aGV5IHNldCB0aGlzIGZpZWxkIHRvIHRydWUuDQo+IA0KPiBSZWdhcmRpbmcgdGhl
IG5vZGUgbG9vay11cDoNCj4gDQo+IDEuIElmIG5vIGluaXRfZGF0YSBpcyBnaXZlbiwgdGhlbiBu
byBub2RlLWxvb2t1cCBpcyBkb25lIGFuZCBjZGV2DQo+ICAgIG5hbWUgaXMgdXNlZCBhcyBzdWNo
LiAoYXMgd2FzIGVhcmxpZXIpDQo+IA0KPiAyLiBJZiBuZWl0aGVyIG1hdGNoX3Byb3BlcnR5IG5v
ciBvZl9tYXRjaCBpcyBnaXZlbiB0aGVuIHBhc3NlZA0KPiBzdGFydGluZw0KPiAgICBwb2ludCBp
cyB1c2VkIGFzIHN1Y2guIChhcyB3YXMgZWFybGllciAtIGl0IG1pZ2h0IGhlbHAgaW4NCj4gICAg
ZmV3IGNhc2VzIHRvIHVzZSBkZXZfZndub2RlKCkgaGVyZSBidXQgdGhhdCB3b3VsZCBjaGFuZ2Ug
ZXhpc3RpbmcNCj4gICAgbG9naWMgYW5kIHBvc3NpYmx5IGNhdXNlIHNvbWUgZXhpc3Rpbmcgc2V0
dXAgdG8gYnJlYWspLg0KPiANCj4gMy4gSWYgaW5pdF9kYXRhIGlzIGdpdmVuIGJ1dCBubyBzdGFy
dGluZyBwb2ludCBmb3Igbm9kZSBsb29rdXAgLSB0aGVuDQo+ICAgIChwYXJlbnQpIGRldmljZSdz
IG93biBEVCBub2RlIGlzIHVzZWQgYXMgc3RhcnRpbmcgcG9pbnQgZm9yIGxvb2stDQo+IHVwLg0K
PiANCj4gNC4gVGhlIG1hdGNoX3Byb3BlcnR5IGhhcyBwcmlvcml0eSBvdmVyIG9mX21hdGNoIGFu
ZCBpcyBmaXJzdCB1c2VkDQo+IGZvcg0KPiAgICBsb29rLXVwLiBJZiBhIG5vZGUgd2l0aCBtYXRj
aGluZyBwcm9wZXJ0eSBpcyBmb3VuZCB0aGVuIHRoZSBmb3VuZA0KPiBub2RlDQo+ICAgIGlzIHVz
ZWQuDQo+IA0KPiA1LiBJZiBubyBtYXRjaF9wcm9wZXJ0eSBpcyBnaXZlbiBvciBubyBtYXRoaWNu
ZyBwcm9wZXJ0eSB3YXMgZm91bmQNCj4gdGhlbg0KPiAgICBvZl9tYWN0aCBpcyB1c2VkLiBUaGUg
bm9kZSB3aGljaCBuYW1lIG1hdGNoZXMgb2ZfbWF0Y2ggaXMgc2VhcmNoZWQNCj4gZm9yDQo+ICAg
IGFuZCB1c2VkIGlmIGZvdW5kLg0KPiANCj4gVGhpcyBlbnN1cmVzIHRoYXQgZXhpc3RpbmcgZHJp
dmVycyB3aGljaCBkbyBub3QgcG9wdWxhdGUgb2ZfbWF0Y2ggb3INCj4gbWF0Y2hfcHJvcGVydHkg
aW4gaW5pdF9kYXRhIHdvbnQgYmUgaW1wYWN0ZWQgYnUgbm9kZSBsb29rLXVwLg0KPiANCj4gU2ln
bmVkLW9mZi1ieTogTWF0dGkgVmFpdHRpbmVuIDxtYXR0aS52YWl0dGluZW5AZmkucm9obWV1cm9w
ZS5jb20+DQo+IC0tLQ0KPiBubyBjaGFuZ2VzIHNpbmNlIHY5DQo+IA0KPiAgZHJpdmVycy9sZWRz
L2xlZC1jbGFzcy5jIHwgMTE1ICsrKysrKysrKysrKysrKy0tDQo+ICBkcml2ZXJzL2xlZHMvbGVk
LWNvcmUuYyAgfCAyNTggKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKystLS0tLQ0KPiAt
LQ0KPiAgaW5jbHVkZS9saW51eC9sZWRzLmggICAgIHwgIDk0ICsrKysrKysrKysrKy0tDQo+ICAz
IGZpbGVzIGNoYW5nZWQsIDQwMSBpbnNlcnRpb25zKCspLCA2NiBkZWxldGlvbnMoLSkNCj4gDQo+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL2xlZHMvbGVkLWNsYXNzLmMgYi9kcml2ZXJzL2xlZHMvbGVk
LWNsYXNzLmMNCj4gaW5kZXggNDM4Nzc0MzE1ZTZjLi4xNzBhYjIyN2VhYTkgMTAwNjQ0DQo+IC0t
LSBhL2RyaXZlcnMvbGVkcy9sZWQtY2xhc3MuYw0KPiArKysgYi9kcml2ZXJzL2xlZHMvbGVkLWNs
YXNzLmMNCj4gQEAgLTIzNSw2ICsyMzUsMzIgQEAgc3RhdGljIGludCBsZWRfY2xhc3NkZXZfbmV4
dF9uYW1lKGNvbnN0IGNoYXINCj4gKmluaXRfbmFtZSwgY2hhciAqbmFtZSwNCj4gIAlyZXR1cm4g
aTsNCj4gIH0NCj4gIA0KPiArc3RhdGljIHZvaWQgbGVkX2FkZF9wcm9wcyhzdHJ1Y3QgbGVkX2Ns
YXNzZGV2ICpsZCwgc3RydWN0DQo+IGxlZF9wcm9wZXJ0aWVzICpwcm9wcykNCj4gK3sNCj4gKwlp
ZiAocHJvcHMtPmRlZmF1bHRfdHJpZ2dlcikNCj4gKwkJbGQtPmRlZmF1bHRfdHJpZ2dlciA9IHBy
b3BzLT5kZWZhdWx0X3RyaWdnZXI7DQo+ICsJLyoNCj4gKwkgKiBBY2NvcmRpbmcgdG8gYmluZGlu
ZyBkb2NzIHRoZSBMRUQgaXMgYnktZGVmYXVsdCB0dXJuZWQgT0ZGDQo+IHVubGVzcw0KPiArCSAq
IGRlZmF1bHRfc3RhdGUgaXMgdXNlZCB0byBpbmRpY2F0ZSBpdCBzaG91bGQgYmUgT04gb3IgdGhh
dA0KPiBzdGF0ZQ0KPiArCSAqIHNob3VsZCBiZSBrZXB0IGFzIGlzDQo+ICsJICovDQo+ICsJaWYg
KHByb3BzLT5kZWZhdWx0X3N0YXRlKSB7DQo+ICsJCWxkLT5icmlnaHRuZXNzID0gTEVEX09GRjsN
Cj4gKwkJaWYgKCFzdHJjbXAocHJvcHMtPmRlZmF1bHRfc3RhdGUsICJvbiIpKSB7DQo+ICsJCQlp
ZiAoIWxkLT5tYXhfYnJpZ2h0bmVzcykNCj4gKwkJCQlsZC0+YnJpZ2h0bmVzcyA9IExFRF9GVUxM
Ow0KPiArCQkJZWxzZQ0KPiArCQkJCWxkLT5icmlnaHRuZXNzID0gbGQtPm1heF9icmlnaHRuZXNz
Ow0KDQpUaGlzIG1ha2VzIG5vIHNlbnNlIGFzIGxvbmcgYXMgd2UgdW5jb25kaXRpb25hbGx5IGNh
bGwgdGhlIA0KbGVkX3VwZGF0ZV9icmlnaHRuZXNzIGF0IHRoZSBlbmQgb2YgbGVkX2NsYXNzZGV2
X3JlZ2lzdGVyX2V4dC4gSQ0KbWlzcmVhZCB0aGUgbGVkX3VwZGF0ZV9icmlnaHRuZXNzIC0gYW5k
IHRob3VnaHQgaXQgd291bGQgdXBkYXRlIHRoZQ0KYnJpZ2h0bmVzcyB2YWx1ZSBmcm9tIGxlZCBj
bGFzc2RldiB0byBoYXJkd2FyZS4gQnV0IHRoaXMgaXMgYWN0dWFsbHkNCnRoZSBvcHBvc2l0ZSAt
IGl0IHJlYWRzIHZhbHVlIGZyb20gSFcgYW5kIHNldHMgaXQgdG8gY2xhc3NkZXYuIFNvDQp1cGRh
dGluZyB2YWx1ZSBpbiBjbGFzc2RldiB3b24ndCBoZWxwIGFzIHRoZSBsZWRfdXBkYXRlX2JyaWdo
dG5lc3Mgd2lsbA0Kb3ZlcndyaXRlIGl0Lg0KDQpTbyBmb3IgcHJvcGVyIGNvbW1vbiBEVCBwYXJz
aW5nIHdlIG5lZWQgYSBmbGFnIHRvIHVwZGF0ZSB0aGUgbmV3DQpkZWZhdWx0IHZhbHVlIGZyb20g
RFQgdG8gSFcgLSBpZiB0aGUgZGVmYXVsdCBpcyBnaXZlbi4gQW5kIHNwaWxsIG91dCBhDQp3YXJu
aW5nIGlmIGRyaXZlciBkb2VzIG5vdCBpbXBsZW1lbnQgY2FsbGJhY2sgdG8gc2V0IGJyaWdodG5l
c3MuDQoNCkFueXdheXMsIEkgbmVlZCB0byByZXdvcmsgdGhpcyBwYXRjaCB0byBzb21lIGV4dGVu
dCAoYW5kIEknbGwgYWxzbyB0cnkNCnRvIHNlZSBob3cgZXhpc3RpbmcgZHJpdmVycyBjb3VsZCBi
ZSB1cGRhdGVkKS4NCg0KU28gbGV0J3MgZHJvcCB0aGUgcGF0Y2ggMTIgYW5kIDEzIGZyb20gdGhp
cyBzZXJpZXMgLSBJIHRyeSB0byByZXdvcmsNCnRoZW0gZm9yIG5leHQga2VybmVsIHJlbGVhc2Ug
dGhlbi4gOikNCg0KPiArCS8qDQo+ICsJICogV2UgcHJvYmFibHkgc2hvdWxkIG5vdCBjYWxsIHRo
ZSBicmlnaHRuZXNzX2dldCBwcmlvciBjYWxsaW5nDQo+ICsJICogdGhlIG9mX3BhcnNlX2NiIGlm
IG9uZSBpcyBwcm92aWRlZC4NCj4gKwkgKiBBZGQgYSBmbGFnIHRvIGFkdmVydGljZSB0aGF0IHN0
YXRlIHNob3VsZCBiZSBxdWVyaWVkIGFuZA0KPiBrZXB0IGFzLWlzLg0KPiArCSAqLw0KPiArCQl9
IGVsc2UgaWYgKCFzdHJjbXAocHJvcHMtPmRlZmF1bHRfc3RhdGUsICJrZWVwIikpDQo+ICsJCQlw
cm9wcy0+YnJpZ2h0bmVzc19rZWVwID0gdHJ1ZTsNCj4gKwl9DQo+ICt9DQo+ICsNCj4gIC8qKg0K
PiAgICogbGVkX2NsYXNzZGV2X3JlZ2lzdGVyX2V4dCAtIHJlZ2lzdGVyIGEgbmV3IG9iamVjdCBv
ZiBsZWRfY2xhc3NkZXYNCj4gY2xhc3MNCj4gICAqCQkJICAgICAgIHdpdGggaW5pdCBkYXRhLg0K
PiBAQCAtMjUxLDIyICsyNzcsNjkgQEAgaW50IGxlZF9jbGFzc2Rldl9yZWdpc3Rlcl9leHQoc3Ry
dWN0IGRldmljZQ0KPiAqcGFyZW50LA0KPiAgCWNoYXIgZmluYWxfbmFtZVtMRURfTUFYX05BTUVf
U0laRV07DQo+ICAJY29uc3QgY2hhciAqcHJvcG9zZWRfbmFtZSA9IGNvbXBvc2VkX25hbWU7DQo+
ICAJaW50IHJldDsNCj4gLQ0KPiArCXN0cnVjdCBsZWRfcHJvcGVydGllcyBwcm9wcyA9IHswfTsN
Cj4gKwlzdHJ1Y3QgZndub2RlX2hhbmRsZSAqZnc7DQo+ICsNCj4gKwkvKg0KPiArCSAqIFdlIGRv
bid0IHRyeSBnZXR0aW5nIHRoZSBuYW1lIGJhc2VkIG9uIERUIG5vZGUgaWYgaW5pdC1kYXRhDQo+
IGlzIG5vdA0KPiArCSAqIGdpdmVuLiBXZSBjb3VsZCBzZWUgaWYgd2UgZmluZCBMRUQgcHJvcGVy
dGllcyBmcm9tIHRoZQ0KPiBkZXZpY2UncyBub2RlDQo+ICsJICogYnV0IHRoYXQgbWlnaHQgY2hh
bmdlIExFRCBuYW1lcyBmb3Igb2xkIHVzZXJzIG9mDQo+ICsJICogbGVkX2NsYXNzZGV2X3JlZ2lz
dGVyIHdobyBoYXZlIGJlZW4gcHJvdmlkaW5nIHRoZSBMRUQgbmFtZQ0KPiBpbg0KPiArCSAqIGNk
ZXYtPm5hbWUuIFNvIHdlIHNlZWsgZndub2RlIGZvciBuYW1lcyBvbmx5IGlmIGluaXRfZGF0YSBp
cw0KPiBnaXZlbg0KPiArCSAqLw0KPiAgCWlmIChpbml0X2RhdGEpIHsNCj4gKwkJbGVkX2NkZXYt
PmluaXRfZGF0YSA9IGluaXRfZGF0YTsNCj4gIAkJaWYgKGluaXRfZGF0YS0+ZGV2bmFtZV9tYW5k
YXRvcnkgJiYgIWluaXRfZGF0YS0NCj4gPmRldmljZW5hbWUpIHsNCj4gIAkJCWRldl9lcnIocGFy
ZW50LCAiTWFuZGF0b3J5IGRldmljZSBuYW1lIGlzDQo+IG1pc3NpbmciKTsNCj4gIAkJCXJldHVy
biAtRUlOVkFMOw0KPiAgCQl9DQo+IC0JCXJldCA9IGxlZF9jb21wb3NlX25hbWUocGFyZW50LCBp
bml0X2RhdGEsDQo+IGNvbXBvc2VkX25hbWUpOw0KPiArDQo+ICsJCWZ3ID0gbGVkX2dldF9md25v
ZGUocGFyZW50LCBpbml0X2RhdGEpOw0KPiArCQlpZiAoSVNfRVJSKGZ3KSkNCj4gKwkJCXJldHVy
biBQVFJfRVJSKGZ3KTsNCj4gKw0KPiArCQlpZiAoZncpIHsNCj4gKwkJCS8qDQo+ICsJCQkgKiBX
ZSBkaWQgaW5jcmVhc2UgcmVmY291bnQgZm9yIGZ3bm9kZS4gTGV0J3MNCj4gc2V0IGEgZmxhZw0K
PiArCQkJICogc28gd2UgY2FuIGRlY3JlYXNlIGl0IGR1cmluZyBkZXJlZ2lzdHJhdGlvbg0KPiAr
CQkJICovDQo+ICsJCQlsZWRfY2Rldi0+Zndub2RlX293bmVkID0gdHJ1ZTsNCj4gKw0KPiArCQkJ
cmV0ID0gbGVkX3BhcnNlX2Z3bm9kZV9wcm9wcyhwYXJlbnQsIGZ3LA0KPiAmcHJvcHMpOw0KPiAr
CQkJaWYgKHJldCkNCj4gKwkJCQlnb3RvIGVycl9vdXQ7DQo+ICsNCj4gKwkJCWlmIChpbml0X2Rh
dGEtPm9mX3BhcnNlX2NiKQ0KPiArCQkJCXJldCA9IGluaXRfZGF0YS0+b2ZfcGFyc2VfY2IobGVk
X2NkZXYsDQo+IGZ3LA0KPiArCQkJCQkJCSAgICAgJnByb3BzKTsNCj4gKwkJCWlmIChyZXQgPCAw
KQ0KPiArCQkJCWdvdG8gZXJyX291dDsNCj4gKw0KPiArCQkJLyoNCj4gKwkJCSAqIEhhbmRsZSB0
aGUgY29tbW9uIExFRCBwcm9wZXJ0aWVzIG9ubHkgZm9yDQo+IGRyaXZlcnMNCj4gKwkJCSAqIHRo
YXQgZXhwbGljaXRseSByZXF1ZXN0IGl0LiBUaGlzIGFsbG93cyB1cw0KPiB0byB0ZXN0DQo+ICsJ
CQkgKiBhbmQgY29udmVydCBkcml2ZXJzIHRvIHV0aWxpemUgY29tbW9uIExFRA0KPiBwYXJzaW5n
IG9uZQ0KPiArCQkJICogYnkgb25lLg0KPiArCQkJICovDQo+ICsJCQlpZiAoaW5pdF9kYXRhLT5w
YXJzZV9md25vZGUpDQo+ICsJCQkJbGVkX2FkZF9wcm9wcyhsZWRfY2RldiwgJnByb3BzKTsNCj4g
Kw0KPiArCQl9IGVsc2Ugew0KPiArCQkJbGVkX2NkZXYtPmZ3bm9kZV9vd25lZCA9IGZhbHNlOw0K
PiArCQl9DQo+ICsJCXJldCA9IGxlZF9jb21wb3NlX25hbWUocGFyZW50LCBpbml0X2RhdGEsICZw
cm9wcywNCj4gKwkJCQkgICAgICAgY29tcG9zZWRfbmFtZSk7DQo+ICAJCWlmIChyZXQgPCAwKQ0K
PiAtCQkJcmV0dXJuIHJldDsNCj4gKwkJCWdvdG8gZXJyX291dDsNCj4gIAl9IGVsc2Ugew0KPiAg
CQlwcm9wb3NlZF9uYW1lID0gbGVkX2NkZXYtPm5hbWU7DQo+ICsJCWxlZF9jZGV2LT5md25vZGVf
b3duZWQgPSBmYWxzZTsNCj4gKwkJZncgPSBOVUxMOw0KPiAgCX0NCj4gIA0KPiAgCXJldCA9IGxl
ZF9jbGFzc2Rldl9uZXh0X25hbWUocHJvcG9zZWRfbmFtZSwgZmluYWxfbmFtZSwNCj4gc2l6ZW9m
KGZpbmFsX25hbWUpKTsNCj4gIAlpZiAocmV0IDwgMCkNCj4gLQkJcmV0dXJuIHJldDsNCj4gKwkJ
Z290byBlcnJfb3V0Ow0KPiAgDQo+ICAJbXV0ZXhfaW5pdCgmbGVkX2NkZXYtPmxlZF9hY2Nlc3Mp
Ow0KPiAgCW11dGV4X2xvY2soJmxlZF9jZGV2LT5sZWRfYWNjZXNzKTsNCj4gQEAgLTI3NCwyMiAr
MzQ3LDI4IEBAIGludCBsZWRfY2xhc3NkZXZfcmVnaXN0ZXJfZXh0KHN0cnVjdCBkZXZpY2UNCj4g
KnBhcmVudCwNCj4gIAkJCQlsZWRfY2RldiwgbGVkX2NkZXYtPmdyb3VwcywgIiVzIiwNCj4gZmlu
YWxfbmFtZSk7DQo+ICAJaWYgKElTX0VSUihsZWRfY2Rldi0+ZGV2KSkgew0KPiAgCQltdXRleF91
bmxvY2soJmxlZF9jZGV2LT5sZWRfYWNjZXNzKTsNCj4gLQkJcmV0dXJuIFBUUl9FUlIobGVkX2Nk
ZXYtPmRldik7DQo+ICsJCXJldCA9IFBUUl9FUlIobGVkX2NkZXYtPmRldik7DQo+ICsJCWdvdG8g
ZXJyX291dDsNCj4gIAl9DQo+IC0JaWYgKGluaXRfZGF0YSAmJiBpbml0X2RhdGEtPmZ3bm9kZSkN
Cj4gLQkJbGVkX2NkZXYtPmRldi0+Zndub2RlID0gaW5pdF9kYXRhLT5md25vZGU7DQo+ICsJaWYg
KGZ3KQ0KPiArCQlsZWRfY2Rldi0+ZGV2LT5md25vZGUgPSBmdzsNCj4gIA0KPiAgCWlmIChyZXQp
DQo+ICAJCWRldl93YXJuKHBhcmVudCwgIkxlZCAlcyByZW5hbWVkIHRvICVzIGR1ZSB0byBuYW1l
DQo+IGNvbGxpc2lvbiIsDQo+ICAJCQkJbGVkX2NkZXYtPm5hbWUsIGRldl9uYW1lKGxlZF9jZGV2
LQ0KPiA+ZGV2KSk7DQo+ICANCj4gKwlpZiAocHJvcHMuYnJpZ2h0bmVzc19rZWVwKQ0KPiArCQlp
ZiAobGVkX2NkZXYtPmJyaWdodG5lc3NfZ2V0KQ0KPiArCQkJbGVkX2NkZXYtPmJyaWdodG5lc3Mg
PQ0KPiArCQkJCSBsZWRfY2Rldi0+YnJpZ2h0bmVzc19nZXQobGVkX2NkZXYpOw0KPiArDQo+ICAJ
aWYgKGxlZF9jZGV2LT5mbGFncyAmIExFRF9CUklHSFRfSFdfQ0hBTkdFRCkgew0KPiAgCQlyZXQg
PSBsZWRfYWRkX2JyaWdodG5lc3NfaHdfY2hhbmdlZChsZWRfY2Rldik7DQo+ICAJCWlmIChyZXQp
IHsNCj4gIAkJCWRldmljZV91bnJlZ2lzdGVyKGxlZF9jZGV2LT5kZXYpOw0KPiAgCQkJbGVkX2Nk
ZXYtPmRldiA9IE5VTEw7DQo+ICAJCQltdXRleF91bmxvY2soJmxlZF9jZGV2LT5sZWRfYWNjZXNz
KTsNCj4gLQkJCXJldHVybiByZXQ7DQo+ICsJCQlnb3RvIGVycl9vdXQ7DQo+ICAJCX0NCj4gIAl9
DQo+ICANCj4gQEAgLTMyMiw2ICs0MDEsMTcgQEAgaW50IGxlZF9jbGFzc2Rldl9yZWdpc3Rlcl9l
eHQoc3RydWN0IGRldmljZQ0KPiAqcGFyZW50LA0KPiAgCQkJbGVkX2NkZXYtPm5hbWUpOw0KPiAg
DQo+ICAJcmV0dXJuIDA7DQo+ICtlcnJfb3V0Og0KPiArCWlmIChsZWRfY2Rldi0+Zndub2RlX293
bmVkKSB7DQo+ICsJCWZ3bm9kZV9oYW5kbGVfcHV0KGZ3KTsNCj4gKwkJLyoNCj4gKwkJICogVGhp
cyBtaWdodCBub3QgYmUgbmVlZGVkIGFzICdmd25vZGVfb3duZWQnIGlzIGFsd2F5cw0KPiArCQkg
KiBpbml0aWFsaXplZCBpbiBsZWRfY2xhc3NkZXZfcmVnaXN0ZXJfZXh0DQo+ICsJCSAqLw0KPiAr
CQlsZWRfY2Rldi0+Zndub2RlX293bmVkID0gZmFsc2U7DQo+ICsJfQ0KPiArDQo+ICsJcmV0dXJu
IHJldDsNCj4gIH0NCj4gIEVYUE9SVF9TWU1CT0xfR1BMKGxlZF9jbGFzc2Rldl9yZWdpc3Rlcl9l
eHQpOw0KPiAgDQo+IEBAIC0zNTUsNiArNDQ1LDE1IEBAIHZvaWQgbGVkX2NsYXNzZGV2X3VucmVn
aXN0ZXIoc3RydWN0IGxlZF9jbGFzc2Rldg0KPiAqbGVkX2NkZXYpDQo+ICAJaWYgKGxlZF9jZGV2
LT5mbGFncyAmIExFRF9CUklHSFRfSFdfQ0hBTkdFRCkNCj4gIAkJbGVkX3JlbW92ZV9icmlnaHRu
ZXNzX2h3X2NoYW5nZWQobGVkX2NkZXYpOw0KPiAgDQo+ICsJaWYgKGxlZF9jZGV2LT5md25vZGVf
b3duZWQpIHsNCj4gKwkJZndub2RlX2hhbmRsZV9wdXQobGVkX2NkZXYtPmRldi0+Zndub2RlKTsN
Cj4gKwkJLyoNCj4gKwkJICogVGhpcyBtaWdodCBub3QgYmUgbmVlZGVkIGFzICdmd25vZGVfb3du
ZWQnIGlzIGFsd2F5cw0KPiArCQkgKiBpbml0aWFsaXplZCBpbiBsZWRfY2xhc3NkZXZfcmVnaXN0
ZXJfZXh0DQo+ICsJCSAqLw0KPiArCQlsZWRfY2Rldi0+Zndub2RlX293bmVkID0gZmFsc2U7DQo+
ICsJfQ0KPiArDQo+ICAJZGV2aWNlX3VucmVnaXN0ZXIobGVkX2NkZXYtPmRldik7DQo+ICANCj4g
IAlkb3duX3dyaXRlKCZsZWRzX2xpc3RfbG9jayk7DQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2xl
ZHMvbGVkLWNvcmUuYyBiL2RyaXZlcnMvbGVkcy9sZWQtY29yZS5jDQo+IGluZGV4IGYxZjcxOGRi
ZTBmOC4uM2NkMTc4NDQ5NGYyIDEwMDY0NA0KPiAtLS0gYS9kcml2ZXJzL2xlZHMvbGVkLWNvcmUu
Yw0KPiArKysgYi9kcml2ZXJzL2xlZHMvbGVkLWNvcmUuYw0KPiBAQCAtMzY1LDcwICszNjUsMjI2
IEBAIHZvaWQgbGVkX3N5c2ZzX2VuYWJsZShzdHJ1Y3QgbGVkX2NsYXNzZGV2DQo+ICpsZWRfY2Rl
dikNCj4gIH0NCj4gIEVYUE9SVF9TWU1CT0xfR1BMKGxlZF9zeXNmc19lbmFibGUpOw0KPiAgDQo+
IC1zdGF0aWMgdm9pZCBsZWRfcGFyc2VfZndub2RlX3Byb3BzKHN0cnVjdCBkZXZpY2UgKmRldiwN
Cj4gLQkJCQkgICBzdHJ1Y3QgZndub2RlX2hhbmRsZSAqZndub2RlLA0KPiAtCQkJCSAgIHN0cnVj
dCBsZWRfcHJvcGVydGllcyAqcHJvcHMpDQo+ICtzdGF0aWMgaW50IGZ3X2lzX21hdGNoKHN0cnVj
dCBmd25vZGVfaGFuZGxlICpmdywNCj4gKwkJICAgICAgIHN0cnVjdCBsZWRfZndfbWF0Y2hfcHJv
cGVydHkgKm1wLCB2b2lkICp2YWwpDQo+ICB7DQo+IC0JaW50IHJldDsNCj4gKwl2b2lkICpjbXAg
PSBtcC0+cmF3X3ZhbDsNCj4gKwlpbnQgcmV0ID0gLUVJTlZBTDsNCj4gKw0KPiArCWlmIChtcC0+
cmF3X3ZhbCkgew0KPiArCQlyZXQgPSBmd25vZGVfcHJvcGVydHlfcmVhZF91OF9hcnJheShmdywg
bXAtPm5hbWUsIHZhbCwNCj4gKwkJCQkJCSAgICBtcC0+c2l6ZSk7DQo+ICsJfSBlbHNlIGlmICht
cC0+aW50dmFsKSB7DQo+ICsJCWNtcCA9IG1wLT5pbnR2YWw7DQo+ICsJCXN3aXRjaCAobXAtPnNp
emUpIHsNCj4gKwkJY2FzZSAxOg0KPiArCQkJcmV0ID0gZndub2RlX3Byb3BlcnR5X3JlYWRfdThf
YXJyYXkoZncsIG1wLQ0KPiA+bmFtZSwgdmFsLA0KPiArCQkJCQkJICAgIG1wLT5zaXplKTsNCj4g
KwkJCWJyZWFrOw0KPiArCQljYXNlIDI6DQo+ICsJCQlyZXQgPSBmd25vZGVfcHJvcGVydHlfcmVh
ZF91MTZfYXJyYXkoZncsIG1wLQ0KPiA+bmFtZSwgdmFsLA0KPiArCQkJCQkJICAgIG1wLT5zaXpl
KTsNCj4gKwkJCWJyZWFrOw0KPiArCQljYXNlIDQ6DQo+ICsJCQlyZXQgPSBmd25vZGVfcHJvcGVy
dHlfcmVhZF91MzJfYXJyYXkoZncsIG1wLQ0KPiA+bmFtZSwgdmFsLA0KPiArCQkJCQkJICAgIG1w
LT5zaXplKTsNCj4gKwkJCWJyZWFrOw0KPiArCQljYXNlIDg6DQo+ICsJCQlyZXQgPSBmd25vZGVf
cHJvcGVydHlfcmVhZF91NjRfYXJyYXkoZncsIG1wLQ0KPiA+bmFtZSwgdmFsLA0KPiArCQkJCQkJ
ICAgIG1wLT5zaXplKTsNCj4gKwkJCWJyZWFrOw0KPiArCQlkZWZhdWx0Og0KPiArCQkJcmV0dXJu
IC1FSU5WQUw7DQo+ICsJCX0NCj4gKwl9DQo+ICsJaWYgKCFyZXQgJiYgY21wKQ0KPiArCQlpZiAo
IW1lbWNtcCh2YWwsIGNtcCwgbXAtPnNpemUpKQ0KPiArCQkJcmV0dXJuIDE7DQo+ICsNCj4gKwly
ZXR1cm4gMDsNCj4gK30NCj4gKy8qKg0KPiArICogbGVkX2dldF9md25vZGUgLSBmaW5kIGZ3bm9k
ZSBmb3IgbGVkDQo+ICsgKiBAcGFyZW50CUxFRCBjb250cm9sbGVyIGRldmljZQ0KPiArICogQGlu
aXRfZGF0YQlsZWQgaW5pdCBkYXRhIHdpdGggbWF0Y2ggaW5mb3JtYXRpb24NCj4gKyAqDQo+ICsg
KiBTY2FucyB0aGUgZmlybXdhcmUgbm9kZXMgYW5kIHJldHVybnMgbm9kZSBtYXRjaGluZyB0aGUg
Z2l2ZW4NCj4gaW5pdF9kYXRhLg0KPiArICogTk9URTogRnVuY3Rpb24gaW5jcmVhc2VzIHJlZmNv
dW50IGZvciBmb3VuZCBub2RlLiBDYWxsZXIgbXVzdA0KPiBkZWNyZWFzZQ0KPiArICogcmVmY291
bnQgdXNpbmcgZndub2RlX2hhbmRsZV9wdXQgd2hlbiBmaW5pc2hlZCB3aXRoIG5vZGUuDQo+ICsg
Ki8NCj4gK3N0cnVjdCBmd25vZGVfaGFuZGxlICpsZWRfZ2V0X2Z3bm9kZShzdHJ1Y3QgZGV2aWNl
ICpwYXJlbnQsDQo+ICsJCQkJICAgICAgc3RydWN0IGxlZF9pbml0X2RhdGEgKmluaXRfZGF0YSkN
Cj4gK3sNCj4gKwlzdHJ1Y3QgZndub2RlX2hhbmRsZSAqZnc7DQo+ICsNCj4gKwkvKg0KPiArCSAq
IFRoaXMgc2hvdWxkIG5ldmVyIGJlIGNhbGxlZCB3aXRob3V0IGluaXQgZGF0YS4gV2UgY291bGQN
Cj4gYWx3YXlzIHJldHVybg0KPiArCSAqIGRldl9md25vZGUoKSAtIGJ1dCB0aGVuIHdlIHNob3Vs
ZCBwdW1wLXVwIHRoZSByZWZjb3VudA0KPiArCSAqLw0KPiArCWlmICghaW5pdF9kYXRhKQ0KPiAr
CQlyZXR1cm4gTlVMTDsNCj4gKw0KPiArCS8qDQo+ICsJICogRm9yIG5vdyB3ZSBkbyBvbmx5IGRv
IG5vZGUgbG9vay11cCBmb3IgZHJpdmVycyB3aGljaA0KPiBwb3B1bGF0ZQ0KPiArCSAqIHRoZSBu
ZXcgbWF0Y2ggcHJvcGVydGllcy4gV2UgY291bGQgYW5kIHBlcmhhcHMgc2hvdWxkIGRvDQo+ICsJ
ICogZncgPSBkZXZfZndub2RlKHBhcmVudCk7IGlmIGdpdmVuIGZ3bm9kZSBpcyBOVUxMLiBCdXQg
aW4NCj4gb3JkZXIgbm90IHRvDQo+ICsJICogYnJlYWsgdGhlIGV4aXN0aW5nIHNldHVwcyB3ZSBr
ZWVwIHRoZSBvbGQgYmVoYXZpb3VyIGFuZCBqdXN0DQo+IGRpcmVjdGx5DQo+ICsJICogdXNlIHRo
ZSBnaXZlbiBpbml0X2RhdGEtPmZ3bm9kZSBubyBtYXR0ZXIgaWYgaXQgaXMgTlVMTCBvcg0KPiBu
b3QuDQo+ICsJICovDQo+ICsNCj4gKwlpZiAoKCFpbml0X2RhdGEtPm1hdGNoX3Byb3BlcnR5Lm5h
bWUgfHwNCj4gKwkgICAgICFpbml0X2RhdGEtPm1hdGNoX3Byb3BlcnR5LnNpemUpICYmICFpbml0
X2RhdGEtPm9mX21hdGNoKQ0KPiArCQlyZXR1cm4gZndub2RlX2hhbmRsZV9nZXQoaW5pdF9kYXRh
LT5md25vZGUpOw0KPiArDQo+ICsJLyogbWF0Y2ggaW5mb3JtYXRpb24gd2FzIGdpdmVuIC0gZG8g
bm9kZSBsb29rLXVwICovDQo+ICsNCj4gKwlpZiAoIWluaXRfZGF0YS0+Zndub2RlKQ0KPiArCQlm
dyA9IGRldl9md25vZGUocGFyZW50KTsNCj4gKwllbHNlDQo+ICsJCWZ3ID0gaW5pdF9kYXRhLT5m
d25vZGU7DQo+ICsNCj4gKwlpZiAoIWZ3KQ0KPiArCQlyZXR1cm4gTlVMTDsNCj4gKw0KPiArCS8q
DQo+ICsJICogU2ltcGxlIHRoaW5ncyBhcmUgcHJldHR5LiBJIHRoaW5rIHNpbXBsZXN0IGlzIHRv
IHVzZSBEVA0KPiBub2RlLW5hbWUNCj4gKwkgKiBmb3IgbWF0Y2hpbmcgdGhlIG5vZGUgd2l0aCBM
RUQgLSBzYW1lIHdheSByZWd1bGF0b3JzIHVzZSB0aGUNCj4gbm9kZQ0KPiArCSAqIG5hbWUgdG8g
bWF0Y2ggd2l0aCBkZXNjLg0KPiArCSAqDQo+ICsJICogVGhpcyBtYXkgbm90IHdvcmsgd2l0aCBl
eGlzdGluZyBMRUQgRFQgZW50cmllcyBpZiB0aGUgbm9kZQ0KPiBuYW1lIGhhcw0KPiArCSAqIGJl
ZW4gZnJlZWx5IHBpY2thYmxlLiBJbiBvcmRlciB0byB0aGlzIHRvIHdvcmsgdGhlIGJpbmRpbmcN
Cj4gZG9jDQo+ICsJICogZm9yIExFRCBkcml2ZXIgc2hvdWxkIGRlZmluZSB1c2FibGUgbm9kZSBu
YW1lcy4NCj4gKwkgKg0KPiArCSAqIElmIHRoaXMgaXMgbm90IHdvcmtpbmcgd2UgY2FuIGRlZmlu
ZSBzcGVjaWZpYyBtYXRjaCBwcm9wZXJ0eQ0KPiB3aGljaA0KPiArCSAqIHZhbHVlIHdlIHNjYW4g
YW5kIHVzZSBmb3IgbWF0Y2hpbmcgZm9yIExFRHMgY29ubmVjdGVkIHRvIHRoZQ0KPiArCSAqIGNv
bnRyb2xsZXIuDQo+ICsJICovDQo+ICsJaWYgKGluaXRfZGF0YS0+bWF0Y2hfcHJvcGVydHkubmFt
ZSAmJiBpbml0X2RhdGEtDQo+ID5tYXRjaF9wcm9wZXJ0eS5zaXplKSB7DQo+ICsJCXU4ICp2YWw7
DQo+ICsJCWludCByZXQ7DQo+ICsJCXN0cnVjdCBmd25vZGVfaGFuZGxlICpjaGlsZDsNCj4gKwkJ
c3RydWN0IGxlZF9md19tYXRjaF9wcm9wZXJ0eSAqbXA7DQo+ICsNCj4gKwkJbXAgPSAmaW5pdF9k
YXRhLT5tYXRjaF9wcm9wZXJ0eTsNCj4gKw0KPiArCQl2YWwgPSBremFsbG9jKG1wLT5zaXplLCBH
RlBfS0VSTkVMKTsNCj4gKwkJaWYgKCF2YWwpDQo+ICsJCQlyZXR1cm4gRVJSX1BUUigtRU5PTUVN
KTsNCj4gKw0KPiArCQlmd25vZGVfZm9yX2VhY2hfY2hpbGRfbm9kZShmdywgY2hpbGQpIHsNCj4g
KwkJCXJldCA9IGZ3X2lzX21hdGNoKGNoaWxkLCBtcCwgdmFsKTsNCj4gKwkJCWlmIChyZXQgPiAw
KSB7DQo+ICsJCQkJa2ZyZWUodmFsKTsNCj4gKwkJCQlyZXR1cm4gY2hpbGQ7DQo+ICsJCQl9DQo+
ICsJCQlpZiAocmV0IDwgMCkgew0KPiArCQkJCWRldl9lcnIocGFyZW50LA0KPiArCQkJCQkiaW52
YWxpZCBmdyBtYXRjaC4gVXNlDQo+IHJhd192YWw/XG4iKTsNCj4gKwkJCQlmd25vZGVfaGFuZGxl
X3B1dChjaGlsZCk7DQo+ICsJCQkJYnJlYWs7DQo+ICsJCQl9DQo+ICsJCX0NCj4gKwkJa2ZyZWUo
dmFsKTsNCj4gKwl9DQo+ICsJaWYgKGluaXRfZGF0YS0+b2ZfbWF0Y2gpDQo+ICsJCWZ3ID0gZndu
b2RlX2dldF9uYW1lZF9jaGlsZF9ub2RlKGZ3LCBpbml0X2RhdGEtDQo+ID5vZl9tYXRjaCk7DQo+
ICsNCj4gKwlyZXR1cm4gZnc7DQo+ICt9DQo+ICtFWFBPUlRfU1lNQk9MKGxlZF9nZXRfZndub2Rl
KTsNCj4gKw0KPiAraW50IGxlZF9wYXJzZV9md25vZGVfcHJvcHMoc3RydWN0IGRldmljZSAqZGV2
LCBzdHJ1Y3QgZndub2RlX2hhbmRsZQ0KPiAqZndub2RlLA0KPiArCQkJICAgc3RydWN0IGxlZF9w
cm9wZXJ0aWVzICpwcm9wcykNCj4gK3sNCj4gKwlpbnQgcmV0ID0gMDsNCj4gIA0KPiAgCWlmICgh
Zndub2RlKQ0KPiAtCQlyZXR1cm47DQo+ICsJCXJldHVybiAwOw0KPiAgDQo+ICAJaWYgKGZ3bm9k
ZV9wcm9wZXJ0eV9wcmVzZW50KGZ3bm9kZSwgImxhYmVsIikpIHsNCj4gIAkJcmV0ID0gZndub2Rl
X3Byb3BlcnR5X3JlYWRfc3RyaW5nKGZ3bm9kZSwgImxhYmVsIiwNCj4gJnByb3BzLT5sYWJlbCk7
DQo+ICAJCWlmIChyZXQpDQo+ICAJCQlkZXZfZXJyKGRldiwgIkVycm9yIHBhcnNpbmcgJ2xhYmVs
JyBwcm9wZXJ0eQ0KPiAoJWQpXG4iLCByZXQpOw0KPiAtCQlyZXR1cm47DQo+ICsJCXJldHVybiBy
ZXQ7DQo+ICAJfQ0KPiAgDQo+ICsJLyoNCj4gKwkgKiBQbGVhc2Ugbm90ZSwgbG9naWMgY2hhbmdl
ZCAtIGlmIGludmFsaWQgcHJvcGVydHkgaXMgZm91bmQgd2UNCj4gYmFpbA0KPiArCSAqIGVhcmx5
IG91dCB3aXRob3V0IHBhcnNpbmcgdGhlIHJlc3Qgb2YgdGhlIHByb3BlcnRpZXMuDQo+IE9yaWdp
bmFsbHkNCj4gKwkgKiB0aGlzIHdhcyB0aGUgY2FzZSBvbmx5IGZvciAnbGFiZWwnIHByb3BlcnR5
LiBJIGRvbid0IGtub3cNCj4gdGhlDQo+ICsJICogcmF0aW9uYWxlIGJlaGluZCBvcmlnaW5hbCBs
b2dpYyBhbGxvd2luZyBpbnZhbGlkIHByb3BlcnRpZXMNCj4gdG8gYmUNCj4gKwkgKiBnaXZlbi4g
SWYgdGhlcmUgaXMgYSByZWFzb24gdGhlbiB3ZSBzaG91bGQgcmVjb25zaWRlciB0aGlzLg0KPiAr
CSAqIEludHVpdGl2ZWx5IGl0IGZlZWxzIGNvcnJlY3QgdG8ganVzdCB5ZWxsIGFuZCBxdWl0IGlm
IHdlIGhpdA0KPiB2YWx1ZSB3ZQ0KPiArCSAqIGRvbid0IHVuZGVyc3RhbmQgLSBidXQgaW50dWl0
aW9uIG1heSBiZSB3cm9uZyBhdCB0aW1lcyA6KQ0KPiArCSAqLw0KPiAgCWlmIChmd25vZGVfcHJv
cGVydHlfcHJlc2VudChmd25vZGUsICJjb2xvciIpKSB7DQo+ICAJCXJldCA9IGZ3bm9kZV9wcm9w
ZXJ0eV9yZWFkX3UzMihmd25vZGUsICJjb2xvciIsICZwcm9wcy0NCj4gPmNvbG9yKTsNCj4gLQkJ
aWYgKHJldCkNCj4gKwkJaWYgKHJldCkgew0KPiAgCQkJZGV2X2VycihkZXYsICJFcnJvciBwYXJz
aW5nICdjb2xvcicgcHJvcGVydHkNCj4gKCVkKVxuIiwgcmV0KTsNCj4gLQkJZWxzZSBpZiAocHJv
cHMtPmNvbG9yID49IExFRF9DT0xPUl9JRF9NQVgpDQo+ICsJCQlyZXR1cm4gcmV0Ow0KPiArCQl9
IGVsc2UgaWYgKHByb3BzLT5jb2xvciA+PSBMRURfQ09MT1JfSURfTUFYKSB7DQo+ICAJCQlkZXZf
ZXJyKGRldiwgIkxFRCBjb2xvciBpZGVudGlmaWVyIG91dCBvZg0KPiByYW5nZVxuIik7DQo+IC0J
CWVsc2UNCj4gLQkJCXByb3BzLT5jb2xvcl9wcmVzZW50ID0gdHJ1ZTsNCj4gKwkJCXJldHVybiBy
ZXQ7DQo+ICsJCX0NCj4gKwkJcHJvcHMtPmNvbG9yX3ByZXNlbnQgPSB0cnVlOw0KPiAgCX0NCj4g
IA0KPiArCWlmIChmd25vZGVfcHJvcGVydHlfcHJlc2VudChmd25vZGUsICJmdW5jdGlvbiIpKSB7
DQo+ICsJCXJldCA9IGZ3bm9kZV9wcm9wZXJ0eV9yZWFkX3N0cmluZyhmd25vZGUsICJmdW5jdGlv
biIsDQo+ICsJCQkJCQkgICZwcm9wcy0+ZnVuY3Rpb24pOw0KPiArCQlpZiAocmV0KSB7DQo+ICsJ
CQlkZXZfZXJyKGRldiwNCj4gKwkJCQkiRXJyb3IgcGFyc2luZyAnZnVuY3Rpb24nIHByb3BlcnR5
DQo+ICglZClcbiIsDQo+ICsJCQkJcmV0KTsNCj4gKwkJCXJldHVybiByZXQ7DQo+ICsJCX0NCj4g
Kwl9DQo+ICANCj4gLQlpZiAoIWZ3bm9kZV9wcm9wZXJ0eV9wcmVzZW50KGZ3bm9kZSwgImZ1bmN0
aW9uIikpDQo+IC0JCXJldHVybjsNCj4gLQ0KPiAtCXJldCA9IGZ3bm9kZV9wcm9wZXJ0eV9yZWFk
X3N0cmluZyhmd25vZGUsICJmdW5jdGlvbiIsICZwcm9wcy0NCj4gPmZ1bmN0aW9uKTsNCj4gLQlp
ZiAocmV0KSB7DQo+IC0JCWRldl9lcnIoZGV2LA0KPiAtCQkJIkVycm9yIHBhcnNpbmcgJ2Z1bmN0
aW9uJyBwcm9wZXJ0eSAoJWQpXG4iLA0KPiAtCQkJcmV0KTsNCj4gKwlpZiAoZndub2RlX3Byb3Bl
cnR5X3ByZXNlbnQoZndub2RlLCAiZnVuY3Rpb24tZW51bWVyYXRvciIpKSB7DQo+ICsJCXJldCA9
IGZ3bm9kZV9wcm9wZXJ0eV9yZWFkX3UzMihmd25vZGUsICJmdW5jdGlvbi0NCj4gZW51bWVyYXRv
ciIsDQo+ICsJCQkJCSAgICAgICAmcHJvcHMtPmZ1bmNfZW51bSk7DQo+ICsJCWlmIChyZXQpIHsN
Cj4gKwkJCWRldl9lcnIoZGV2LA0KPiArCQkJCSJFcnJvciBwYXJzaW5nICdmdW5jdGlvbi1lbnVt
ZXJhdG9yJw0KPiBwcm9wZXJ0eSAoJWQpXG4iLA0KPiArCQkJCXJldCk7DQo+ICsJCQlyZXR1cm4g
cmV0Ow0KPiArCQl9DQo+ICsJCXByb3BzLT5mdW5jX2VudW1fcHJlc2VudCA9IHRydWU7DQo+ICAJ
fQ0KPiAgDQo+IC0JaWYgKCFmd25vZGVfcHJvcGVydHlfcHJlc2VudChmd25vZGUsICJmdW5jdGlv
bi1lbnVtZXJhdG9yIikpDQo+IC0JCXJldHVybjsNCj4gKwlpZiAoZndub2RlX3Byb3BlcnR5X3By
ZXNlbnQoZndub2RlLCAiZGVmYXVsdC1zdGF0ZSIpKSB7DQo+ICsJCXJldCA9IGZ3bm9kZV9wcm9w
ZXJ0eV9yZWFkX3N0cmluZyhmd25vZGUsICJkZWZhdWx0LQ0KPiBzdGF0ZSIsDQo+ICsJCQkJCQkg
ICZwcm9wcy0NCj4gPmRlZmF1bHRfc3RhdGUpOw0KPiArCQlpZiAocmV0KSB7DQo+ICsJCQlkZXZf
ZXJyKGRldiwNCj4gKwkJCQkiRXJyb3IgcGFyc2luZyAnZGVmYXVsdC1zdGF0ZScgcHJvcGVydHkN
Cj4gKCVkKVxuIiwNCj4gKwkJCQlyZXQpOw0KPiArCQkJcmV0dXJuIHJldDsNCj4gKwkJfQ0KPiAr
CX0NCj4gIA0KPiAtCXJldCA9IGZ3bm9kZV9wcm9wZXJ0eV9yZWFkX3UzMihmd25vZGUsICJmdW5j
dGlvbi1lbnVtZXJhdG9yIiwNCj4gLQkJCQkgICAgICAgJnByb3BzLT5mdW5jX2VudW0pOw0KPiAt
CWlmIChyZXQpIHsNCj4gLQkJZGV2X2VycihkZXYsDQo+IC0JCQkiRXJyb3IgcGFyc2luZyAnZnVu
Y3Rpb24tZW51bWVyYXRvcicgcHJvcGVydHkNCj4gKCVkKVxuIiwNCj4gLQkJCXJldCk7DQo+IC0J
fSBlbHNlIHsNCj4gLQkJcHJvcHMtPmZ1bmNfZW51bV9wcmVzZW50ID0gdHJ1ZTsNCj4gKwlpZiAo
Zndub2RlX3Byb3BlcnR5X3ByZXNlbnQoZndub2RlLCAibGludXgsZGVmYXVsdC10cmlnZ2VyIikp
IHsNCj4gKwkJcmV0ID0gZndub2RlX3Byb3BlcnR5X3JlYWRfc3RyaW5nKGZ3bm9kZSwNCj4gKwkJ
CQkJCSAgImxpbnV4LGRlZmF1bHQtDQo+IHRyaWdnZXIiLA0KPiArCQkJCQkJICAmcHJvcHMtDQo+
ID5kZWZhdWx0X3RyaWdnZXIpOw0KPiArCQlpZiAocmV0KQ0KPiArCQkJZGV2X2VycihkZXYsDQo+
ICsJCQkJIkVycm9yIHBhcnNpbmcgJ2xpbnV4LGRlZmF1bHQtdHJpZ2dlcicNCj4gcHJvcGVydHkg
KCVkKVxuIiwNCj4gKwkJCQlyZXQpOw0KPiAgCX0NCj4gKwlyZXR1cm4gcmV0Ow0KPiAgfQ0KPiAr
RVhQT1JUX1NZTUJPTF9HUEwobGVkX3BhcnNlX2Z3bm9kZV9wcm9wcyk7DQo+ICANCj4gIGludCBs
ZWRfY29tcG9zZV9uYW1lKHN0cnVjdCBkZXZpY2UgKmRldiwgc3RydWN0IGxlZF9pbml0X2RhdGEN
Cj4gKmluaXRfZGF0YSwNCj4gLQkJICAgICBjaGFyICpsZWRfY2xhc3NkZXZfbmFtZSkNCj4gKwkJ
ICAgICBzdHJ1Y3QgbGVkX3Byb3BlcnRpZXMgKnByb3BzLCBjaGFyDQo+ICpsZWRfY2xhc3NkZXZf
bmFtZSkNCj4gIHsNCj4gLQlzdHJ1Y3QgbGVkX3Byb3BlcnRpZXMgcHJvcHMgPSB7fTsNCj4gLQlz
dHJ1Y3QgZndub2RlX2hhbmRsZSAqZndub2RlID0gaW5pdF9kYXRhLT5md25vZGU7DQo+ICAJY29u
c3QgY2hhciAqZGV2aWNlbmFtZSA9IGluaXRfZGF0YS0+ZGV2aWNlbmFtZTsNCj4gIA0KPiAgCWlm
ICghbGVkX2NsYXNzZGV2X25hbWUpDQo+ICAJCXJldHVybiAtRUlOVkFMOw0KPiAgDQo+IC0JbGVk
X3BhcnNlX2Z3bm9kZV9wcm9wcyhkZXYsIGZ3bm9kZSwgJnByb3BzKTsNCj4gLQ0KPiAtCWlmIChw
cm9wcy5sYWJlbCkgew0KPiArCWlmIChwcm9wcy0+bGFiZWwpIHsNCj4gIAkJLyoNCj4gIAkJICog
SWYgaW5pdF9kYXRhLmRldmljZW5hbWUgaXMgTlVMTCwgdGhlbiBpdCBpbmRpY2F0ZXMNCj4gdGhh
dA0KPiAgCQkgKiBEVCBsYWJlbCBzaG91bGQgYmUgdXNlZCBhcy1pcyBmb3IgTEVEIGNsYXNzIGRl
dmljZQ0KPiBuYW1lLg0KPiBAQCAtNDM2LDIzICs1OTIsMjMgQEAgaW50IGxlZF9jb21wb3NlX25h
bWUoc3RydWN0IGRldmljZSAqZGV2LCBzdHJ1Y3QNCj4gbGVkX2luaXRfZGF0YSAqaW5pdF9kYXRh
LA0KPiAgCQkgKiB0aGUgZmluYWwgTEVEIGNsYXNzIGRldmljZSBuYW1lLg0KPiAgCQkgKi8NCj4g
IAkJaWYgKCFkZXZpY2VuYW1lKSB7DQo+IC0JCQlzdHJzY3B5KGxlZF9jbGFzc2Rldl9uYW1lLCBw
cm9wcy5sYWJlbCwNCj4gKwkJCXN0cnNjcHkobGVkX2NsYXNzZGV2X25hbWUsIHByb3BzLT5sYWJl
bCwNCj4gIAkJCQlMRURfTUFYX05BTUVfU0laRSk7DQo+ICAJCX0gZWxzZSB7DQo+ICAJCQlzbnBy
aW50ZihsZWRfY2xhc3NkZXZfbmFtZSwgTEVEX01BWF9OQU1FX1NJWkUsDQo+ICIlczolcyIsDQo+
IC0JCQkJIGRldmljZW5hbWUsIHByb3BzLmxhYmVsKTsNCj4gKwkJCQkgZGV2aWNlbmFtZSwgcHJv
cHMtPmxhYmVsKTsNCj4gIAkJfQ0KPiAtCX0gZWxzZSBpZiAocHJvcHMuZnVuY3Rpb24gfHwgcHJv
cHMuY29sb3JfcHJlc2VudCkgew0KPiArCX0gZWxzZSBpZiAocHJvcHMtPmZ1bmN0aW9uIHx8IHBy
b3BzLT5jb2xvcl9wcmVzZW50KSB7DQo+ICAJCWNoYXIgdG1wX2J1ZltMRURfTUFYX05BTUVfU0la
RV07DQo+ICANCj4gLQkJaWYgKHByb3BzLmZ1bmNfZW51bV9wcmVzZW50KSB7DQo+ICsJCWlmIChw
cm9wcy0+ZnVuY19lbnVtX3ByZXNlbnQpIHsNCj4gIAkJCXNucHJpbnRmKHRtcF9idWYsIExFRF9N
QVhfTkFNRV9TSVpFLCAiJXM6JXMtDQo+ICVkIiwNCj4gLQkJCQkgcHJvcHMuY29sb3JfcHJlc2Vu
dCA/DQo+IGxlZF9jb2xvcnNbcHJvcHMuY29sb3JdIDogIiIsDQo+IC0JCQkJIHByb3BzLmZ1bmN0
aW9uID86ICIiLA0KPiBwcm9wcy5mdW5jX2VudW0pOw0KPiArCQkJCSBwcm9wcy0+Y29sb3JfcHJl
c2VudCA/DQo+IGxlZF9jb2xvcnNbcHJvcHMtPmNvbG9yXSA6ICIiLA0KPiArCQkJCSBwcm9wcy0+
ZnVuY3Rpb24gPzogIiIsIHByb3BzLQ0KPiA+ZnVuY19lbnVtKTsNCj4gIAkJfSBlbHNlIHsNCj4g
IAkJCXNucHJpbnRmKHRtcF9idWYsIExFRF9NQVhfTkFNRV9TSVpFLCAiJXM6JXMiLA0KPiAtCQkJ
CSBwcm9wcy5jb2xvcl9wcmVzZW50ID8NCj4gbGVkX2NvbG9yc1twcm9wcy5jb2xvcl0gOiAiIiwN
Cj4gLQkJCQkgcHJvcHMuZnVuY3Rpb24gPzogIiIpOw0KPiArCQkJCSBwcm9wcy0+Y29sb3JfcHJl
c2VudCA/DQo+IGxlZF9jb2xvcnNbcHJvcHMtPmNvbG9yXSA6ICIiLA0KPiArCQkJCSBwcm9wcy0+
ZnVuY3Rpb24gPzogIiIpOw0KPiAgCQl9DQo+ICAJCWlmIChpbml0X2RhdGEtPmRldm5hbWVfbWFu
ZGF0b3J5KSB7DQo+ICAJCQlzbnByaW50ZihsZWRfY2xhc3NkZXZfbmFtZSwgTEVEX01BWF9OQU1F
X1NJWkUsDQo+ICIlczolcyIsDQo+IEBAIC00NjgsMTEgKzYyNCwxOSBAQCBpbnQgbGVkX2NvbXBv
c2VfbmFtZShzdHJ1Y3QgZGV2aWNlICpkZXYsIHN0cnVjdA0KPiBsZWRfaW5pdF9kYXRhICppbml0
X2RhdGEsDQo+ICAJCX0NCj4gIAkJc25wcmludGYobGVkX2NsYXNzZGV2X25hbWUsIExFRF9NQVhf
TkFNRV9TSVpFLCAiJXM6JXMiLA0KPiAgCQkJIGRldmljZW5hbWUsIGluaXRfZGF0YS0+ZGVmYXVs
dF9sYWJlbCk7DQo+IC0JfSBlbHNlIGlmIChpc19vZl9ub2RlKGZ3bm9kZSkpIHsNCj4gLQkJc3Ry
c2NweShsZWRfY2xhc3NkZXZfbmFtZSwgdG9fb2Zfbm9kZShmd25vZGUpLT5uYW1lLA0KPiAtCQkJ
TEVEX01BWF9OQU1FX1NJWkUpOw0KPiAtCX0gZWxzZQ0KPiAtCQlyZXR1cm4gLUVJTlZBTDsNCj4g
Kwl9IGVsc2Ugew0KPiArCQlzdHJ1Y3QgZndub2RlX2hhbmRsZSAqZndub2RlID0gbGVkX2dldF9m
d25vZGUoZGV2LA0KPiBpbml0X2RhdGEpOw0KPiArCQlpbnQgcmV0ID0gLUVJTlZBTDsNCj4gKw0K
PiArCQlpZiAoaXNfb2Zfbm9kZShmd25vZGUpKSB7DQo+ICsJCQlyZXQgPSAwOw0KPiArCQkJc3Ry
c2NweShsZWRfY2xhc3NkZXZfbmFtZSwgdG9fb2Zfbm9kZShmd25vZGUpLQ0KPiA+bmFtZSwNCj4g
KwkJCQlMRURfTUFYX05BTUVfU0laRSk7DQo+ICsJCX0NCj4gKwkJZndub2RlX2hhbmRsZV9wdXQo
Zndub2RlKTsNCj4gKw0KPiArCQlyZXR1cm4gcmV0Ow0KPiArCX0NCj4gIA0KPiAgCXJldHVybiAw
Ow0KPiAgfQ0KPiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS9saW51eC9sZWRzLmggYi9pbmNsdWRlL2xp
bnV4L2xlZHMuaA0KPiBpbmRleCAyNDIyNThmN2Q4MzcuLmFmOGNhNDI5MWQ3ZCAxMDA2NDQNCj4g
LS0tIGEvaW5jbHVkZS9saW51eC9sZWRzLmgNCj4gKysrIGIvaW5jbHVkZS9saW51eC9sZWRzLmgN
Cj4gQEAgLTEzLDYgKzEzLDcgQEANCj4gICNpbmNsdWRlIDxsaW51eC9rZXJuZnMuaD4NCj4gICNp
bmNsdWRlIDxsaW51eC9saXN0Lmg+DQo+ICAjaW5jbHVkZSA8bGludXgvbXV0ZXguaD4NCj4gKyNp
bmNsdWRlIDxsaW51eC9wcm9wZXJ0eS5oPg0KPiAgI2luY2x1ZGUgPGxpbnV4L3J3c2VtLmg+DQo+
ICAjaW5jbHVkZSA8bGludXgvc3BpbmxvY2suaD4NCj4gICNpbmNsdWRlIDxsaW51eC90aW1lci5o
Pg0KPiBAQCAtMjAsNiArMjEsNyBAQA0KPiAgDQo+ICBzdHJ1Y3QgZGV2aWNlOw0KPiAgc3RydWN0
IGxlZF9wYXR0ZXJuOw0KPiArc3RydWN0IGxlZF9jbGFzc2RldjsNCj4gIC8qDQo+ICAgKiBMRUQg
Q29yZQ0KPiAgICovDQo+IEBAIC0zMSw4ICszMyw0NyBAQCBlbnVtIGxlZF9icmlnaHRuZXNzIHsN
Cj4gIAlMRURfRlVMTAk9IDI1NSwNCj4gIH07DQo+ICANCj4gK3N0cnVjdCBsZWRfcHJvcGVydGll
cyB7DQo+ICsJdTMyCQljb2xvcjsNCj4gKwlib29sCQljb2xvcl9wcmVzZW50Ow0KPiArCWNvbnN0
IGNoYXIJKmZ1bmN0aW9uOw0KPiArCXUzMgkJZnVuY19lbnVtOw0KPiArCWJvb2wJCWZ1bmNfZW51
bV9wcmVzZW50Ow0KPiArCWNvbnN0IGNoYXIJKmxhYmVsOw0KPiArCWNvbnN0IGNoYXIJKmRlZmF1
bHRfdHJpZ2dlcjsNCj4gKwljb25zdCBjaGFyCSpkZWZhdWx0X3N0YXRlOw0KPiArCWJvb2wJCWJy
aWdodG5lc3Nfa2VlcDsNCj4gK307DQo+ICsNCj4gK3N0cnVjdCBsZWRfZndfbWF0Y2hfcHJvcGVy
dHkgew0KPiArCWNvbnN0IGNoYXIgKm5hbWU7CS8qIE5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIG1h
dGNoICovDQo+ICsJdm9pZCAqcmF3X3ZhbDsJCS8qIFJhdyBwcm9wZXJ0eSB2YWx1ZSBhcyBwcmVz
ZW50IGluDQo+IGZ3bm9kZSAqLw0KPiArCXZvaWQgKmludHZhbDsJCS8qIFByb3BlcnR5IHZhbHVl
IGlmIDgsMTYsMzIgb3IgNjRiaXQNCj4gaW50ZWdlciAqLw0KPiArCXNpemVfdCBzaXplOwkJLyog
U2l6ZSBvZiB2YWx1ZSBpbiBieXRlcyAqLw0KPiArfTsNCj4gKw0KPiAgc3RydWN0IGxlZF9pbml0
X2RhdGEgew0KPiAtCS8qIGRldmljZSBmd25vZGUgaGFuZGxlICovDQo+ICsJLyoNCj4gKwkgKiBJ
ZiBEVCBiaW5kaW5nIGRpY3RhdGVzIHRoZSBub2RlIG5hbWUgdGhlIGRyaXZlciBjYW4gZmlsbA0K
PiBvZl9tYXRjaA0KPiArCSAqIGNvcnJlc3BvbmRpbmcgdG8gbm9kZSBuYW1lIGRlc2NyaWJpbmcg
dGhpcyBMRUQuIElmIGZ3bm9kZSBpcw0KPiBnaXZlbg0KPiArCSAqIHRoZSBtYXRjaCBpcyBzZWFy
Y2hlZCBmcm9tIGl0J3MgY2hpbGQgbm9kZXMuIElmIG5vdCwgdGhlDQo+IG1hdGNoIGlzDQo+ICsJ
ICogc2VhcmNoZWQgZnJvbSBkZXZpY2UncyBvd24gY2hpbGQgbm9kZXMuDQo+ICsJICovDQo+ICsJ
Y29uc3QgY2hhciAqb2ZfbWF0Y2g7DQo+ICsJLyoNCj4gKwkgKiBJZiBmd25vZGUgY29udGFpbnMg
cHJvcGVydHkgd2l0aCBrbm93biB2YWx1ZSB0aGUgZHJpdmVyIGNhbg0KPiBzcGVjaWZ5DQo+ICsJ
ICogY29ycmVjdCBwcm9wZXJ0dHktdmFsdWUgcGFpciBoZXJlIHRvIGRvIHRoZSBtYXRjaGluZy4g
VGhpcw0KPiBoYXMgaGlnaGVyDQo+ICsJICogcHJpb3JpdHkgdGhhbiBvZl9tYXRjaC4gSWYgZndu
b2RlIGlzIGdpdmVuIHRoZSBtYXRjaCBpcw0KPiBzZWFyY2hlZA0KPiArCSAqIGZyb20gaXQncyBj
aGlsZCBub2Rlcy4gSWYgbm90IG1hdGNoIGlzIHNlYXJjaGVkIGZyb20NCj4gZGV2aWNlJ3MNCj4g
KwkgKiBvd24gY2hpbGQgbm9kZXMuDQo+ICsJICovDQo+ICsJc3RydWN0IGxlZF9md19tYXRjaF9w
cm9wZXJ0eSBtYXRjaF9wcm9wZXJ0eTsNCj4gKwkvKg0KPiArCSAqIGRldmljZSBmd25vZGUgaGFu
ZGxlLiBJZiBvZl9tYXRjaCBvciBsZWRfY29tcGF0aWJsZSBhcmUgbm90DQo+IGdpdmVuDQo+ICsJ
ICogdGhpcyBpcyB1c2VkIGZvciBMRUQgYXMgZ2l2ZW4uIElmIG9mX21hdGNoIG9yIGxlZF9jb21w
YXRpYmxlDQo+IGFyZQ0KPiArCSAqIGdpdmVuIHRoZW4gdGhpcyBpcyB1c2VkIGFzIGEgcGFyZW50
IG5vZGUgd2hvc2UgY2hpbGQgbm9kZXMNCj4gYXJlDQo+ICsJICogc2Nhbm5lZCBmb3IgZ2l2ZW4g
bWF0Y2guDQo+ICsJICovDQo+ICAJc3RydWN0IGZ3bm9kZV9oYW5kbGUgKmZ3bm9kZTsNCj4gIAkv
Kg0KPiAgCSAqIGRlZmF1bHQgPGNvbG9yOmZ1bmN0aW9uPiB0dXBsZSwgZm9yIGJhY2t3YXJkIGNv
bXBhdGliaWxpdHkNCj4gQEAgLTUzLDkgKzk0LDE5IEBAIHN0cnVjdCBsZWRfaW5pdF9kYXRhIHsN
Cj4gIAkgKiBzZXQgaXQgdG8gdHJ1ZQ0KPiAgCSAqLw0KPiAgCWJvb2wgZGV2bmFtZV9tYW5kYXRv
cnk7DQo+ICsJLyoNCj4gKwkgKiBDYWxsYmFjayB3aGljaCBhIExFRCBkcml2ZXIgY2FuIHJlZ2lz
dGVyIGlmIGl0IGhhcyBvd24gbm9uLQ0KPiBzdGFuZGFyZA0KPiArCSAqIERUIHByb3BlcnRpZXMu
IENvcmUgY2FsbHMgdGhpcyB3aXRoIHRoZSBsb2NhdGVkIERUIG5vZGUNCj4gZHVyaW5nDQo+ICsJ
ICogY2xhc3NfZGV2aWNlIHJlZ2lzdHJhdGlvbg0KPiArCSAqLw0KPiArCWludCAoKm9mX3BhcnNl
X2NiKShzdHJ1Y3QgbGVkX2NsYXNzZGV2ICpsZCwgc3RydWN0DQo+IGZ3bm9kZV9oYW5kbGUgKmZ3
LA0KPiArCQkJICAgIHN0cnVjdCBsZWRfcHJvcGVydGllcyAqcHJvcHMpOw0KPiArCSAvKiBMRUQg
Y29yZSBzaG91bGQgcGFyc2UgYW5kIGhhbmRsZSB0aGUgY29tbW9uIGZpcm13YXJlDQo+IHByb3Bl
cnRpZXMgKi8NCj4gKwlib29sIHBhcnNlX2Z3bm9kZTsNCj4gIH07DQo+ICANCj4gIHN0cnVjdCBs
ZWRfY2xhc3NkZXYgew0KPiArCXN0cnVjdCBsZWRfaW5pdF9kYXRhCSppbml0X2RhdGE7DQo+ICAJ
Y29uc3QgY2hhcgkJKm5hbWU7DQo+ICAJZW51bSBsZWRfYnJpZ2h0bmVzcwkgYnJpZ2h0bmVzczsN
Cj4gIAllbnVtIGxlZF9icmlnaHRuZXNzCSBtYXhfYnJpZ2h0bmVzczsNCj4gQEAgLTE0OCw2ICsx
OTksNyBAQCBzdHJ1Y3QgbGVkX2NsYXNzZGV2IHsNCj4gIA0KPiAgCS8qIEVuc3VyZXMgY29uc2lz
dGVudCBhY2Nlc3MgdG8gdGhlIExFRCBGbGFzaCBDbGFzcyBkZXZpY2UgKi8NCj4gIAlzdHJ1Y3Qg
bXV0ZXgJCWxlZF9hY2Nlc3M7DQo+ICsJYm9vbAkJCWZ3bm9kZV9vd25lZDsNCj4gIH07DQo+ICAN
Cj4gIC8qKg0KPiBAQCAtMjk5LDYgKzM1MSw3IEBAIHZvaWQgbGVkX3N5c2ZzX2VuYWJsZShzdHJ1
Y3QgbGVkX2NsYXNzZGV2DQo+ICpsZWRfY2Rldik7DQo+ICAgKiBsZWRfY29tcG9zZV9uYW1lIC0g
Y29tcG9zZSBMRUQgY2xhc3MgZGV2aWNlIG5hbWUNCj4gICAqIEBkZXY6IExFRCBjb250cm9sbGVy
IGRldmljZSBvYmplY3QNCj4gICAqIEBpbml0X2RhdGE6IHRoZSBMRUQgY2xhc3MgZGV2aWNlIGlu
aXRpYWxpemF0aW9uIGRhdGENCj4gKyAqIEBwcm9wczogTEVEIHByb3BlcnRpZXMgYXMgcGFyc2Vk
IGZyb20gZndub2RlLg0KPiAgICogQGxlZF9jbGFzc2Rldl9uYW1lOiBjb21wb3NlZCBMRUQgY2xh
c3MgZGV2aWNlIG5hbWUNCj4gICAqDQo+ICAgKiBDcmVhdGUgTEVEIGNsYXNzIGRldmljZSBuYW1l
IGJhc2luZyBvbiB0aGUgcHJvdmlkZWQgaW5pdF9kYXRhDQo+IGFyZ3VtZW50Lg0KPiBAQCAtMzA4
LDcgKzM2MSw4IEBAIHZvaWQgbGVkX3N5c2ZzX2VuYWJsZShzdHJ1Y3QgbGVkX2NsYXNzZGV2DQo+
ICpsZWRfY2Rldik7DQo+ICAgKiBSZXR1cm5zOiAwIG9uIHN1Y2Nlc3Mgb3IgbmVnYXRpdmUgZXJy
b3IgdmFsdWUgb24gZmFpbHVyZQ0KPiAgICovDQo+ICBpbnQgbGVkX2NvbXBvc2VfbmFtZShzdHJ1
Y3QgZGV2aWNlICpkZXYsIHN0cnVjdCBsZWRfaW5pdF9kYXRhDQo+ICppbml0X2RhdGEsDQo+IC0J
CSAgICAgY2hhciAqbGVkX2NsYXNzZGV2X25hbWUpOw0KPiArCQkJICAgIHN0cnVjdCBsZWRfcHJv
cGVydGllcyAqcHJvcHMsDQo+ICsJCQkgICAgY2hhciAqbGVkX2NsYXNzZGV2X25hbWUpOw0KPiAg
DQo+ICAvKioNCj4gICAqIGxlZF9zeXNmc19pc19kaXNhYmxlZCAtIGNoZWNrIGlmIExFRCBzeXNm
cyBpbnRlcmZhY2UgaXMgZGlzYWJsZWQNCj4gQEAgLTMyMSw2ICszNzUsMzMgQEAgc3RhdGljIGlu
bGluZSBib29sIGxlZF9zeXNmc19pc19kaXNhYmxlZChzdHJ1Y3QNCj4gbGVkX2NsYXNzZGV2ICps
ZWRfY2RldikNCj4gIAlyZXR1cm4gbGVkX2NkZXYtPmZsYWdzICYgTEVEX1NZU0ZTX0RJU0FCTEU7
DQo+ICB9DQo+ICANCj4gKy8qKg0KPiArICogbGVkX2dldF9md25vZGUgLSBmaW5kIGZ3bm9kZSBt
YXRjaGluZyBnaXZlbiBMRUQgaW5pdCBkYXRhDQo+ICsgKiBAcGFyZW50OiBMRUQgY29udHJvbGxl
ciBkZXZpY2UgdGhpcyBMRUQgaXMgZHJpdmVuIGJ5DQo+ICsgKiBAaW5pdF9kYXRhOiB0aGUgTEVE
IGNsYXNzIGRldmljZSBpbml0aWFsaXphdGlvbiBkYXRhDQo+ICsgKg0KPiArICogRmluZCB0aGUg
Zncgbm9kZSBtYXRjaGluZyBnaXZlbiBMRUQgaW5pdCBkYXRhLg0KPiArICogTk9URTogRnVuY3Rp
b24gaW5jcmVhc2VzIHJlZmNvdW50IGZvciBmb3VuZCBub2RlLiBDYWxsZXIgbXVzdA0KPiBkZWNy
ZWFzZQ0KPiArICogcmVmY291bnQgdXNpbmcgZndub2RlX2hhbmRsZV9wdXQgd2hlbiBmaW5pc2hl
ZCB3aXRoIG5vZGUuDQo+ICsgKg0KPiArICogUmV0dXJuczogbm9kZSBoYW5kbGUgb3IgTlVMTCBp
ZiBtYXRjaGluZyBmdyBub2RlIHdhcyBub3QgZm91bmQNCj4gKyAqLw0KPiArc3RydWN0IGZ3bm9k
ZV9oYW5kbGUgKmxlZF9nZXRfZndub2RlKHN0cnVjdCBkZXZpY2UgKnBhcmVudCwNCj4gKwkJCQkg
ICAgICBzdHJ1Y3QgbGVkX2luaXRfZGF0YSAqaW5pdF9kYXRhKTsNCj4gKw0KPiArLyoqDQo+ICsg
KiBsZWRfcGFyc2VfZndub2RlX3Byb3BzIC0gcGFyc2UgTEVEIGNvbW1vbiBwcm9wZXJ0aWVzIGZy
b20gZndub2RlDQo+ICsgKiBAZGV2OiBwb2ludGVyIHRvIExFRCBkZXZpY2UuDQo+ICsgKiBAZndu
b2RlOiBMRUQgbm9kZSBjb250YWluaW5nIHRoZSBwcm9wZXJ0aWVzDQo+ICsgKiBAcHJvcHM6IHN0
cnVjdHVyZSB3aGVyZSBmb3VuZCBwcm9wZXJ0eSBkYXRhIGlzIHN0b3JlZC4NCj4gKyAqDQo+ICsg
KiBQYXJzZSB0aGUgY29tbW9uIExFRCBwcm9wZXJ0aWVzIGZyb20gZndub2RlLg0KPiArICoNCj4g
KyAqIFJldHVybnM6IDAgb24gc3VjY2VzcyBvciBuZWdhdGl2ZSBlcnJvciB2YWx1ZSBvbiBmYWls
dXJlDQo+ICsgKi8NCj4gK2ludCBsZWRfcGFyc2VfZndub2RlX3Byb3BzKHN0cnVjdCBkZXZpY2Ug
KmRldiwgc3RydWN0IGZ3bm9kZV9oYW5kbGUNCj4gKmZ3bm9kZSwNCj4gKwkJCSAgIHN0cnVjdCBs
ZWRfcHJvcGVydGllcyAqcHJvcHMpOw0KPiArDQo+ICAvKg0KPiAgICogTEVEIFRyaWdnZXJzDQo+
ICAgKi8NCj4gQEAgLTQ3OCwxNSArNTU5LDYgQEAgc3RydWN0IGxlZF9wbGF0Zm9ybV9kYXRhIHsN
Cj4gIAlzdHJ1Y3QgbGVkX2luZm8JKmxlZHM7DQo+ICB9Ow0KPiAgDQo+IC1zdHJ1Y3QgbGVkX3By
b3BlcnRpZXMgew0KPiAtCXUzMgkJY29sb3I7DQo+IC0JYm9vbAkJY29sb3JfcHJlc2VudDsNCj4g
LQljb25zdCBjaGFyCSpmdW5jdGlvbjsNCj4gLQl1MzIJCWZ1bmNfZW51bTsNCj4gLQlib29sCQlm
dW5jX2VudW1fcHJlc2VudDsNCj4gLQljb25zdCBjaGFyCSpsYWJlbDsNCj4gLX07DQo+IC0NCj4g
IHN0cnVjdCBncGlvX2Rlc2M7DQo+ICB0eXBlZGVmIGludCAoKmdwaW9fYmxpbmtfc2V0X3QpKHN0
cnVjdCBncGlvX2Rlc2MgKmRlc2MsIGludCBzdGF0ZSwNCj4gIAkJCQl1bnNpZ25lZCBsb25nICpk
ZWxheV9vbiwNCj4gLS0gDQo+IDIuMjEuMA0KPiANCj4gDQoNCg==
